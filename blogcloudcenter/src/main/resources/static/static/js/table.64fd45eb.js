(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["table"],{"22dc":function(e,t,s){"use strict";function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return a}))},"365c":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s("f753"),i=s.n(a),l=i.a.create({timeout:5e3});l.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject()})),l.interceptors.response.use((function(e){if(200===e.status)return e.data;Promise.reject()}),(function(e){return console.log(e),Promise.reject()}));var n=l,r=function(e){return n({url:"./table.json",method:"get",params:e})}},"3e92":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 用户管理\n\t\t\t")])],1)],1),s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box"},[s("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAllSelection}},[e._v("批量删除")]),s("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"是否可用"},on:{change:e.selectUsers},model:{value:e.query.address,callback:function(t){e.$set(e.query,"address",t)},expression:"query.address"}},[s("el-option",{key:"1",attrs:{label:"正常用户",value:"1"}}),s("el-option",{key:"2",attrs:{label:"封禁用户",value:"0"}})],1),s("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),s("span",{staticStyle:{float:"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1)],1),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.userList,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"id",label:"编号",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),s("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),s("el-table-column",{attrs:{label:"头像(查看大图)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticClass:"table-td-thumb",attrs:{src:e.row.userFace,"preview-src-list":[e.row.userFace]}})]}}])}),s("el-table-column",{attrs:{prop:"email",label:"email"}}),s("el-table-column",{attrs:{prop:"enabled",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(s){return e.changeStatus(s,t.row,t.$index)}},model:{value:t.row.enabled,callback:function(s){e.$set(t.row,"enabled",s)},expression:"scope.row.enabled"}})]}}])}),s("el-table-column",{attrs:{prop:"regTime",label:"注册时间"}}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),s("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pageNum,"page-size":5,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),s("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{ref:"userList",attrs:{model:e.userList,"label-width":"70px"}},[s("el-input",{attrs:{type:"hidden"},model:{value:e.userList.id,callback:function(t){e.$set(e.userList,"id",t)},expression:"userList.id"}}),s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:e.userList.userName,callback:function(t){e.$set(e.userList,"userName",t)},expression:"userList.userName"}})],1),s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{model:{value:e.userList.nickName,callback:function(t){e.$set(e.userList,"nickName",t)},expression:"userList.nickName"}})],1),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{model:{value:e.userList.email,callback:function(t){e.$set(e.userList,"email",t)},expression:"userList.email"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("提交")])],1)],1),s("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"userList",attrs:{model:e.userList,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:e.userList.userName,callback:function(t){e.$set(e.userList,"userName",t)},expression:"userList.userName"}})],1),s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{model:{value:e.userList.nickName,callback:function(t){e.$set(e.userList,"nickName",t)},expression:"userList.nickName"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.userList.password,callback:function(t){e.$set(e.userList,"password",t)},expression:"userList.password"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.userList.checkpassword,callback:function(t){e.$set(e.userList,"checkpassword",t)},expression:"userList.checkpassword"}})],1),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{model:{value:e.userList.email,callback:function(t){e.$set(e.userList,"email",t)},expression:"userList.email"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.insertUser()}}},[e._v("提交")])],1)],1)],1)},i=[],l=s("22dc"),n=(s("cc57"),s("365c")),r=s("f753"),o=Object(l["a"])({name:"basetable",data:function(){return{dialogVisible:!1,query:{address:"",name:"",pageIndex:1,pageSize:10},userList:[{id:"",userName:"",nickName:"",password:"",enabled:"",email:"",userFace:"",regTime:"",role:""}],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,pageNum:1,form:{},idx:-1,id:-1}},created:function(){this.getData()},methods:{getUserList:function(e,t){var s=this;r.get("http://localhost:8762/login/pageUserByCondition",{params:{pageNum:this.pageNum}}).then((function(e){var t=e.data.list,a=e.data;console.log(t),t&&(s.userList=t,s.pageTotal=a.total,s.pageNum=a.pageNum)}),(function(e){console.log(e),alert("服务器未打开！")}))},changeStatus:function(e,t,s){var a=this;console.log(e),r.get("http://localhost:8762/login/UpUserState",{params:{id:t.id,enabled:e}}).then((function(e){console.log("切换状态成功")})).catch((function(e){console.log("切换状态失败");var i=t;i.status=1===i.status?0:1,a.userList[s]=i}))},selectUsers:function(e){var t=this;console.log("enabled状态"+e),r.get("http://localhost:8762/login/pageUserByCondition",{params:{enabled:e}}).then((function(e){var s=e.data.list,a=e.data;console.log(s),s&&(t.userList=s,t.pageTotal=a.total,t.pageNum=a.pageNum)})).catch((function(e){console.log("切换状态失败");var s=row;s.status=1===s.status?0:1,t.userList[index]=s}))},deleteUser:function(){r.get("http://localhost:8762/login/delUser",{params:{id:this.id}}).then((function(e){console.log(e)}))},getData:function(){var e=this;Object(n["a"])(this.query).then((function(t){console.log(t),e.tableData=t.list,e.pageTotal=t.pageTotal||50}))},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},handleDelete:function(e,t){var s=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){s.id=t.id,s.deleteUser(),s.$message.success("删除成功"),s.userList.splice(e,1)})).catch((function(){s.$message.error("放弃删除")}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this.multipleSelection.length,t="";this.delList=this.delList.concat(this.multipleSelection);for(var s=0;s<e;s++)t+=this.multipleSelection[s].name+" ";this.$message.error("删除了".concat(t)),this.multipleSelection=[]},handleEdit:function(e,t){this.idx=e,this.userList=t,this.editVisible=!0},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},saveEdit:function(){var e=this;this.editVisible=!1,this.$message.success("修改第 ".concat(this.idx+1," 行成功")),this.$set(this.userList,this.idx,this.userList),r.get("http://localhost:8762/login/updateUser",{params:{id:this.userList.id,userName:this.userList.userName,nickName:this.userList.nickName,email:this.userList.email}}).then((function(t){e.getUserList()}))},insertUser:function(){var e=this;r.get("http://localhost:8762/login/addUser",{params:Object(l["a"])({id:this.userList.id,userName:this.userList.userName,nickName:this.userList.nickName,email:this.userList.password},"email",this.userList.email)}).then((function(t){e.getUserList()}))},handlePageChange:function(e){this.pageNum=e,this.getUserList()}}},"created",(function(){this.getUserList()})),c=o,u=(s("aa66"),s("9ca4")),d=Object(u["a"])(c,a,i,!1,null,"19281a22",null);t["default"]=d.exports},aa66:function(e,t,s){"use strict";var a=s("d02f"),i=s.n(a);i.a},d02f:function(e,t,s){}}]);